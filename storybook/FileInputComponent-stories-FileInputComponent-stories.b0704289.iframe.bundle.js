(self.webpackChunk_splunk_ucc_ui_lib=self.webpackChunk_splunk_ucc_ui_lib||[]).push([[1394],{"./src/components/FileInputComponent/FileInputComponent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>FileInputComponent_FileInputComponent});var react=__webpack_require__("./node_modules/react/index.js"),File=__webpack_require__("./node_modules/@splunk/react-ui/File.js"),File_default=__webpack_require__.n(File),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const fileInputConstant_FILE_MAX_SIZE=500,fileInputConstant_REUPLOAD_MESSAGE="Please reupload this file",fileInputConstant_INVALID_FILE_MESSAGE="##INVALID_FILE##";var _templateObject,messageUtil=__webpack_require__("./src/util/messageUtil.ts");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var FileWrapper=(0,styled_components_browser_esm.default)(File_default())(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    width: 320px !important;\n    > div[class*='FileStyles__StyledHelp-'] {\n        margin-bottom: 0px;\n    }\n"])));function FileInputComponent(props){var field=props.field,disabled=props.disabled,controlOptions=props.controlOptions,handleChange=props.handleChange,fileNameToDisplay=props.fileNameToDisplay,encrypted=props.encrypted,fileSupportMessage=controlOptions.fileSupportMessage,supportedFileTypes=controlOptions.supportedFileTypes,_controlOptions$maxFi=controlOptions.maxFileSize,maxFileSize=void 0===_controlOptions$maxFi?fileInputConstant_FILE_MAX_SIZE:_controlOptions$maxFi,_controlOptions$useBa=controlOptions.useBase64Encoding,useBase64Encoding=void 0!==_controlOptions$useBa&&_controlOptions$useBa,fileReader=new FileReader,textDecoder=new TextDecoder,_useState2=_slicedToArray((0,react.useState)(fileNameToDisplay||""),2),fileName=_useState2[0],setFileName=_useState2[1],_useState4=_slicedToArray((0,react.useState)(fileNameToDisplay&&encrypted?fileInputConstant_REUPLOAD_MESSAGE:""),2),errorMsg=_useState4[0],setErrorMsg=_useState4[1];return react.createElement(FileWrapper,{key:field,onRequestAdd:function handleAddFiles(files){if(files.length){var file=files[0];1===fileReader.readyState&&fileReader.abort(),useBase64Encoding?fileReader.readAsDataURL(file):fileReader.readAsArrayBuffer(file),fileReader.onload=function(){var isValid=function isValidFile(fileType,fileSize,supportedFileTypes,maxFileSize){return fileType&&supportedFileTypes.includes(fileType)?!(fileSize>maxFileSize)||react.createElement("span",{style:{color:"red"}},(0,messageUtil.CK)(25,[maxFileSize])):react.createElement("span",{style:{color:"red"}},(0,messageUtil.CK)(1===supportedFileTypes.length?28:24,[supportedFileTypes.join(", ")]))}(file.name.split(".").pop(),file.size/1024,supportedFileTypes,maxFileSize);if(!0===isValid){setErrorMsg("");try{if(fileReader.result&&"string"!=typeof fileReader.result)handleChange(field,textDecoder.decode(fileReader.result));else if(fileReader.result&&"string"==typeof fileReader.result&&fileReader.result.includes("base64,")){var beforeContent=fileReader.result.indexOf("base64,"),pureFileContent=fileReader.result.slice(beforeContent+7);handleChange(field,pureFileContent)}else console.log("File could not be processed as it's format isn't recognized")}catch(err){console.log(err)}}else setErrorMsg(isValid),handleChange(field,fileInputConstant_INVALID_FILE_MESSAGE);setFileName(file.name)}}},onRequestRemove:function handleRemoveFile(){1===fileReader.readyState&&fileReader.abort(),setFileName(null),handleChange(field,""),setErrorMsg("")},supportsMessage:react.createElement(react.Fragment,null," ",fileSupportMessage," "),disabled,help:errorMsg,error:!!errorMsg},fileName&&react.createElement(File_default().Item,{name:fileName}))}const FileInputComponent_FileInputComponent=FileInputComponent;FileInputComponent.__docgenInfo={description:"",methods:[],displayName:"FileInputComponent",props:{field:{required:!0,tsType:{name:"string"},description:""},controlOptions:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n    fileSupportMessage?: string;\n    supportedFileTypes: string[];\n    maxFileSize?: number;\n    useBase64Encoding?: boolean;\n}",signature:{properties:[{key:"fileSupportMessage",value:{name:"string",required:!1}},{key:"supportedFileTypes",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"maxFileSize",value:{name:"number",required:!1}},{key:"useBase64Encoding",value:{name:"boolean",required:!1}}]}},description:""},disabled:{required:!0,tsType:{name:"boolean"},description:""},handleChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, data: string) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"string"},name:"data"}],return:{name:"void"}}},description:""},encrypted:{required:!1,tsType:{name:"boolean"},description:""},fileNameToDisplay:{required:!1,tsType:{name:"string"},description:""}}}},"./src/util/messageUtil.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CK:()=>getFormattedMessage,ZN:()=>parseErrorMsg});var lodash=__webpack_require__("./node_modules/lodash/lodash.js"),i18n=__webpack_require__("./node_modules/@splunk/ui-utils/i18n.js");const messageDict={0:"Field {{args[0]}} is required",1:"Field {{args[0]}} must be a string",2:"{{args[0]}} {{args[1]}} is already in use",3:'"default", ".", "..", string started with "_" and string including any one of ["*", "\\", "[", "]", "(", ")", "?", ":"] are reserved value which cannot be used for field {{args[0]}}',5:"Field {{args[0]}} should be a positive number",6:"Field {{args[0]}} is required",7:"Field {{args[0]}} is not a valid regular expression",8:"Field {{args[0]}} should be within the range of [{{args[1]}} and {{args[2]}}]",9:"Field {{args[0]}} should be greater than or equal to {{args[1]}}",10:"Field {{args[0]}} should be less than or equal to {{args[1]}}",11:"{{args[0]}} is not a function",12:"{{args[0]}} is not a valid regular expression",13:"{{args[0]}} is not a valid number range",15:"Field {{args[0]}} does not match regular expression {{args[1]}}",16:"Field {{args[0]}} is not a number",17:"Length of {{args[0]}} should be greater than or equal to {{args[1]}}",18:"Length of {{args[0]}} should be less than or equal to {{args[1]}}",19:"Field {{args[0]}} is not a valid {{args[1]}}",20:"configuration file should be pure JSON",21:"duplicate {{args[0]}} keys are not allowed",22:"Field {{args[0]}} must be less than 1024 characters",23:'"name" field must be provided for {{args[0]}} \'s entity in configuration file',24:"The file must be in one of these formats: {{args[0]}}",25:"The file size should not exceed {{args[0]}} KB",26:"The file is invalid",27:"{{args[0]}} type is not present in supported File Types",28:"The file must be in {{args[0]}} format",29:"Field {{args[0]}} is not a integer",100:"Create New Input",101:"Delete Confirmation",102:'Are you sure you want to delete "{{args[0]}}" {{args[1]}}? Ensure that no input is configured with "{{args[0]}}" as this will stop data collection for that input.',103:'Are you sure you want to delete "{{args[0]}}" {{args[1]}}?',104:"Error Message",105:"Warning",106:"Input Type",107:"Items",108:"Saving",109:"Failed to load index",110:"Internal configuration file error. Something wrong within the package or installation step. Contact your administrator for support. Detail: {{args[0]}}",111:"URL",112:"email address",113:"IPV4 address",114:"date in ISO 8601 format",116:"Inputs",117:"Configuration",118:"configuration file not found",119:"Monitoring Dashboard",unknown:"An unknown error occurred"};var getFormattedMessage=function getFormattedMessage(code,msg){var template=messageDict[code]||messageDict.unknown;return template=(0,i18n._)(template),lodash.template(template,{escape:/\{\{(.+?)\}\}/g})({args:msg})},tryTrimErrorMessage=function tryTrimErrorMessage(msg){try{var matches=/.+"REST Error \[[\d]+\]:\s+.+\s+--\s+([\s\S]*)"\.\s*See splunkd\.log(\/python.log)? for more details\./.exec(msg);if(matches&&matches[1])try{var innerMsgJSON=JSON.parse(matches[1]);return String(innerMsgJSON.messages[0].text)}catch(error){return function tryParseByteString(text){try{if(text.startsWith("b'")||text.startsWith('b"')){var parsedString=JSON.parse(text.slice(2,-1));return String(parsedString.messages[0].text)}return text}catch(_unused){return text}}(matches[1])}}catch(e){return msg}return msg},parseErrorMsg=function parseErrorMsg(err){try{var _err$response,msg=null==err||null===(_err$response=err.response)||void 0===_err$response||null===(_err$response=_err$response.data)||void 0===_err$response||null===(_err$response=_err$response.messages)||void 0===_err$response||null===(_err$response=_err$response[0])||void 0===_err$response?void 0:_err$response.text;return msg?tryTrimErrorMessage(msg):messageDict.unknown}catch(e){return(0,i18n._)("Error in processing the request")}}},"./src/components/FileInputComponent/stories/FileInputComponent.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Base:()=>Base,EncryptedWithDefaultName:()=>EncryptedWithDefaultName,WithDefaultName:()=>WithDefaultName,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_test__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const __WEBPACK_DEFAULT_EXPORT__={component:__webpack_require__("./src/components/FileInputComponent/FileInputComponent.tsx").A,title:"FileInputComponent",parameters:{snapshots:{height:300}}};var Base={args:{handleChange:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)(),field:"fileInptuComponent",controlOptions:{fileSupportMessage:"test support message",supportedFileTypes:["json","txt"],maxFileSize:500},disabled:!1}},WithDefaultName={args:_objectSpread(_objectSpread({},Base.args),{},{fileNameToDisplay:"Test_file_name.json"})},EncryptedWithDefaultName={args:_objectSpread(_objectSpread({},Base.args),{},{fileNameToDisplay:"Test_file_name.json",encrypted:!0})};const __namedExportsOrder=["Base","WithDefaultName","EncryptedWithDefaultName"];Base.parameters={...Base.parameters,docs:{...Base.parameters?.docs,source:{originalSource:"{\n  args: {\n    handleChange: fn(),\n    field: 'fileInptuComponent',\n    controlOptions: {\n      fileSupportMessage: 'test support message',\n      supportedFileTypes: ['json', 'txt'],\n      maxFileSize: 500\n    },\n    disabled: false\n  }\n}",...Base.parameters?.docs?.source}}},WithDefaultName.parameters={...WithDefaultName.parameters,docs:{...WithDefaultName.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...Base.args,\n    fileNameToDisplay: 'Test_file_name.json'\n  }\n}",...WithDefaultName.parameters?.docs?.source}}},EncryptedWithDefaultName.parameters={...EncryptedWithDefaultName.parameters,docs:{...EncryptedWithDefaultName.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...Base.args,\n    fileNameToDisplay: 'Test_file_name.json',\n    encrypted: true\n  }\n}",...EncryptedWithDefaultName.parameters?.docs?.source}}}},"./node_modules/@storybook/test/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/test/dist sync recursive",module.exports=webpackEmptyContext}}]);